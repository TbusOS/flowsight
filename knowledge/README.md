# ğŸ“š FlowSight Knowledge Base

æœ¬ç›®å½•åŒ…å« FlowSight çš„çŸ¥è¯†åº“å®šä¹‰ï¼Œç”¨äºè¯†åˆ«å„ç§è¯­è¨€å’Œå¹³å°ä¸­çš„å¼‚æ­¥æ¨¡å¼ã€å›è°ƒæœºåˆ¶å’Œæ‰§è¡Œæµè¯­ä¹‰ã€‚

---

## ğŸ¯ æ”¯æŒä¼˜å…ˆçº§è·¯çº¿å›¾

çŸ¥è¯†åº“æŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§é¡ºåºæ„å»ºå’Œå®Œå–„ï¼š

### ç¬¬ä¸€ä¼˜å…ˆçº§ï¼šLinux å†…æ ¸ (P0)

| é˜¶æ®µ | å†…å®¹ | çŠ¶æ€ |
|------|------|------|
| P0.1 | C è¯­è¨€åŸºç¡€å¼‚æ­¥æ¨¡å¼ (work_struct, timer, irq) | âœ… å·²æœ‰åŸºç¡€ |
| P0.2 | å¸¸ç”¨é©±åŠ¨æ¡†æ¶ (USB, char_dev, platform) | âœ… å·²æœ‰åŸºç¡€ |
| P0.3 | å†…æ ¸æ ¸å¿ƒæœºåˆ¶ (RCU, kthread, completion) | ğŸ”² å¾…å®Œå–„ |
| P0.4 | ç½‘ç»œå­ç³»ç»Ÿ (netdev, socket) | ğŸ”² è®¡åˆ’ä¸­ |
| P0.5 | æ–‡ä»¶ç³»ç»Ÿ (VFS, block) | ğŸ”² è®¡åˆ’ä¸­ |
| P0.6 | å†…å­˜ç®¡ç† (slab, vmalloc) | ğŸ”² è®¡åˆ’ä¸­ |

### ç¬¬äºŒä¼˜å…ˆçº§ï¼šAndroid ç³»ç»Ÿ (P1)

| é˜¶æ®µ | å†…å®¹ | çŠ¶æ€ |
|------|------|------|
| P1.1 | Android App å±‚ (Activity, Handler, Coroutine) | âœ… å·²æœ‰åŸºç¡€ |
| P1.2 | Binder IPC | âœ… å·²æœ‰åŸºç¡€ |
| P1.3 | JNI è·¨è¯­è¨€æ¡¥æ¥ | âœ… å·²æœ‰åŸºç¡€ |
| P1.4 | Framework å±‚ (AMS, WMS) | ğŸ”² è®¡åˆ’ä¸­ |
| P1.5 | HAL/HIDL | ğŸ”² è®¡åˆ’ä¸­ |
| P1.6 | Android å†…æ ¸ç‰¹æœ‰é©±åŠ¨ | ğŸ”² è®¡åˆ’ä¸­ |

### ç¬¬ä¸‰ä¼˜å…ˆçº§ï¼šå…¶ä»–è¯­è¨€å’Œå¹³å° (P2)

| é˜¶æ®µ | å†…å®¹ | çŠ¶æ€ |
|------|------|------|
| P2.1 | C++ å¼‚æ­¥æ¨¡å¼ (std::async, std::thread) | ğŸ”² è®¡åˆ’ä¸­ |
| P2.2 | Rust å¼‚æ­¥ (tokio, async-std) | ğŸ”² è®¡åˆ’ä¸­ |
| P2.3 | Go å¹¶å‘ (goroutine, channel) | ğŸ”² è®¡åˆ’ä¸­ |
| P2.4 | Java é€šç”¨ (ExecutorService) | ğŸ”² è®¡åˆ’ä¸­ |
| P2.5 | åµŒå…¥å¼ RTOS (FreeRTOS, Zephyr) | ğŸ”² æœªæ¥è®¡åˆ’ |
| P2.6 | iOS (GCD, Combine) | ğŸ”² æœªæ¥è®¡åˆ’ |

---

## ç›®å½•ç»“æ„

```
knowledge/
â”‚
â”œâ”€â”€ languages/                    # æŒ‰ç¼–ç¨‹è¯­è¨€åˆ†ç±»çš„é€šç”¨æ¨¡å¼
â”‚   â”œâ”€â”€ c/                       # C è¯­è¨€
â”‚   â”‚   â””â”€â”€ async_patterns.yaml  # å¼‚æ­¥æ¨¡å¼ (work_struct, timer, irq...)
â”‚   â”œâ”€â”€ cpp/                     # C++ è¯­è¨€
â”‚   â”‚   â””â”€â”€ async_patterns.yaml  # std::async, std::thread, callback...
â”‚   â”œâ”€â”€ java/                    # Java è¯­è¨€
â”‚   â”‚   â””â”€â”€ async_patterns.yaml  # ExecutorService, CompletableFuture...
â”‚   â”œâ”€â”€ kotlin/                  # Kotlin è¯­è¨€
â”‚   â”‚   â””â”€â”€ coroutines.yaml      # åç¨‹æ¨¡å¼ (launch, async, flow...)
â”‚   â”œâ”€â”€ rust/                    # Rust è¯­è¨€
â”‚   â”‚   â””â”€â”€ async_patterns.yaml  # tokio, async-std...
â”‚   â”œâ”€â”€ go/                      # Go è¯­è¨€
â”‚   â”‚   â””â”€â”€ async_patterns.yaml  # goroutine, channel...
â”‚   â”œâ”€â”€ python/                  # Python è¯­è¨€
â”‚   â”‚   â””â”€â”€ async_patterns.yaml  # asyncio, threading...
â”‚   â””â”€â”€ javascript/              # JavaScript/TypeScript
â”‚       â””â”€â”€ async_patterns.yaml  # Promise, async/await, callback...
â”‚
â”œâ”€â”€ platforms/                    # æŒ‰å¹³å°/ç³»ç»Ÿåˆ†ç±»çš„æ¡†æ¶çŸ¥è¯†
â”‚   â”‚
â”‚   â”œâ”€â”€ linux-kernel/            # Linux å†…æ ¸
â”‚   â”‚   â”œâ”€â”€ core/                # å†…æ ¸æ ¸å¿ƒæœºåˆ¶
â”‚   â”‚   â”‚   â”œâ”€â”€ workqueue.yaml   # å·¥ä½œé˜Ÿåˆ—
â”‚   â”‚   â”‚   â”œâ”€â”€ timer.yaml       # å®šæ—¶å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ irq.yaml         # ä¸­æ–­å¤„ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ rcu.yaml         # RCU æœºåˆ¶
â”‚   â”‚   â”‚   â””â”€â”€ kthread.yaml     # å†…æ ¸çº¿ç¨‹
â”‚   â”‚   â”œâ”€â”€ drivers/             # é©±åŠ¨æ¡†æ¶
â”‚   â”‚   â”‚   â”œâ”€â”€ usb.yaml         # USB é©±åŠ¨æ¡†æ¶
â”‚   â”‚   â”‚   â”œâ”€â”€ char_dev.yaml    # å­—ç¬¦è®¾å¤‡
â”‚   â”‚   â”‚   â”œâ”€â”€ pci.yaml         # PCI é©±åŠ¨æ¡†æ¶
â”‚   â”‚   â”‚   â”œâ”€â”€ platform.yaml    # å¹³å°é©±åŠ¨
â”‚   â”‚   â”‚   â””â”€â”€ i2c.yaml         # I2C é©±åŠ¨æ¡†æ¶
â”‚   â”‚   â”œâ”€â”€ fs/                  # æ–‡ä»¶ç³»ç»Ÿ
â”‚   â”‚   â”‚   â””â”€â”€ vfs.yaml         # VFS å›è°ƒ
â”‚   â”‚   â””â”€â”€ net/                 # ç½‘ç»œå­ç³»ç»Ÿ
â”‚   â”‚       â””â”€â”€ netdev.yaml      # ç½‘ç»œè®¾å¤‡é©±åŠ¨
â”‚   â”‚
â”‚   â”œâ”€â”€ android/                 # Android ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ app/                 # åº”ç”¨å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ activity.yaml    # Activity/Fragment ç”Ÿå‘½å‘¨æœŸ
â”‚   â”‚   â”‚   â”œâ”€â”€ android_async.yaml # Handler, Executor, WorkManager...
â”‚   â”‚   â”‚   â””â”€â”€ jetpack.yaml     # Jetpack ç»„ä»¶ (LiveData, ViewModel...)
â”‚   â”‚   â”œâ”€â”€ framework/           # Framework å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ binder.yaml      # Binder IPC
â”‚   â”‚   â”‚   â”œâ”€â”€ ams.yaml         # ActivityManagerService
â”‚   â”‚   â”‚   â””â”€â”€ wms.yaml         # WindowManagerService
â”‚   â”‚   â””â”€â”€ hal/                 # HAL å±‚
â”‚   â”‚       â”œâ”€â”€ hidl.yaml        # HIDL æ¥å£
â”‚   â”‚       â””â”€â”€ aidl_hal.yaml    # AIDL HAL (Android 11+)
â”‚   â”‚
â”‚   â”œâ”€â”€ ios/                     # iOS ç³»ç»Ÿ (æœªæ¥æ”¯æŒ)
â”‚   â”‚   â”œâ”€â”€ uikit.yaml           # UIKit ç”Ÿå‘½å‘¨æœŸ
â”‚   â”‚   â””â”€â”€ gcd.yaml             # Grand Central Dispatch
â”‚   â”‚
â”‚   â””â”€â”€ embedded/                # åµŒå…¥å¼ç³»ç»Ÿ (æœªæ¥æ”¯æŒ)
â”‚       â”œâ”€â”€ freertos.yaml        # FreeRTOS
â”‚       â””â”€â”€ zephyr.yaml          # Zephyr RTOS
â”‚
â”œâ”€â”€ bridges/                      # è·¨è¯­è¨€æ¡¥æ¥å®šä¹‰
â”‚   â”œâ”€â”€ jni.yaml                 # Java â†” C/C++ (JNI)
â”‚   â”œâ”€â”€ cgo.yaml                 # Go â†” C (CGO)
â”‚   â”œâ”€â”€ pyo3.yaml                # Python â†” Rust (PyO3)
â”‚   â”œâ”€â”€ napi.yaml                # Node.js â†” C++ (N-API)
â”‚   â””â”€â”€ ffi.yaml                 # é€šç”¨ FFI æ¨¡å¼
â”‚
â”œâ”€â”€ types/                        # ç±»å‹å®šä¹‰å’Œæ˜ å°„
â”‚   â”œâ”€â”€ c_types.yaml             # C è¯­è¨€ç±»å‹
â”‚   â”œâ”€â”€ java_types.yaml          # Java ç±»å‹
â”‚   â””â”€â”€ common_types.yaml        # è·¨è¯­è¨€é€šç”¨ç±»å‹
â”‚
â”œâ”€â”€ schemas/                      # JSON Schema å®šä¹‰
â”‚   â”œâ”€â”€ async_pattern.schema.json
â”‚   â”œâ”€â”€ framework.schema.json
â”‚   â””â”€â”€ bridge.schema.json
â”‚
â””â”€â”€ README.md                     # æœ¬æ–‡ä»¶
```

---

## çŸ¥è¯†åº“ç±»å‹

### 1. è¯­è¨€çº§æ¨¡å¼ (`languages/`)

å®šä¹‰ç‰¹å®šç¼–ç¨‹è¯­è¨€ä¸­é€šç”¨çš„å¼‚æ­¥å’Œå›è°ƒæ¨¡å¼ï¼Œä¸å…·ä½“å¹³å°æ— å…³ã€‚

```yaml
# ç¤ºä¾‹: languages/c/async_patterns.yaml
work_struct:
  description: "Work Queue"
  bind_patterns:
    - pattern: 'INIT_WORK\s*\(&?(?P<var>[\w\.\->]+),\s*(?P<handler>\w+)\)'
  trigger_patterns:
    - pattern: 'schedule_work\s*\(&?(?P<var>[\w\.\->]+)\)'
```

### 2. å¹³å°çº§æ¡†æ¶ (`platforms/`)

å®šä¹‰ç‰¹å®šå¹³å°æˆ–æ¡†æ¶ä¸­çš„å›è°ƒæ¥å£ã€ç”Ÿå‘½å‘¨æœŸå’Œ API è¯­ä¹‰ã€‚

```yaml
# ç¤ºä¾‹: platforms/android/app/activity.yaml
activity:
  lifecycle_callbacks:
    onCreate:
      description: "Activity åˆ›å»ºæ—¶è°ƒç”¨"
      next_states: ["onStart"]
```

### 3. è·¨è¯­è¨€æ¡¥æ¥ (`bridges/`)

å®šä¹‰ä¸åŒè¯­è¨€é—´çš„è°ƒç”¨çº¦å®šå’Œç±»å‹æ˜ å°„ã€‚

```yaml
# ç¤ºä¾‹: bridges/jni.yaml
jni_bridge:
  naming_conventions:
    static_registration:
      java_pattern: 'native\s+\w+\s+(?P<method>\w+)\s*\('
      native_pattern: 'Java_(?P<package>[\w_]+)_(?P<method>\w+)'
```

---

## å¦‚ä½•è´¡çŒ®

1. **æ·»åŠ æ–°æ¨¡å¼**: åœ¨å¯¹åº”ç›®å½•ä¸‹åˆ›å»ºæˆ–ä¿®æ”¹ YAML æ–‡ä»¶
2. **éµå¾ª Schema**: å‚è€ƒ `schemas/` ç›®å½•ä¸‹çš„ JSON Schema
3. **æ·»åŠ æµ‹è¯•**: åœ¨ `tests/fixtures/` ä¸­æ·»åŠ æµ‹è¯•ç”¨ä¾‹
4. **æäº¤ PR**: æè¿°æ¸…æ¥šæ·»åŠ çš„æ¨¡å¼å’Œä½¿ç”¨åœºæ™¯

è¯¦ç»†è§„èŒƒè¯·å‚è€ƒ [KNOWLEDGE-BASE-SCHEMA.md](../docs/KNOWLEDGE-BASE-SCHEMA.md)

---

## çŸ¥è¯†åº“ç‰ˆæœ¬è·¯çº¿å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        çŸ¥è¯†åº“ç‰ˆæœ¬æ¼”è¿›                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  v0.1 â”€â”€â–º v0.5 â”€â”€â–º v1.0 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º v2.0 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º v3.0      â”‚
â”‚   â”‚         â”‚        â”‚                    â”‚                    â”‚        â”‚
â”‚   â”‚         â”‚        â”‚                    â”‚                    â”‚        â”‚
â”‚   â–¼         â–¼        â–¼                    â–¼                    â–¼        â”‚
â”‚  åŸºç¡€      é©±åŠ¨    Linux å†…æ ¸          Android              å…¶ä»–        â”‚
â”‚  æ¨¡å¼     æ¡†æ¶    å®Œæ•´æ”¯æŒ            ç³»ç»Ÿæ”¯æŒ           è¯­è¨€/å¹³å°      â”‚
â”‚                                                                          â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•       â”‚
â”‚     ç¬¬ä¸€ä¼˜å…ˆçº§ (P0)        ç¬¬äºŒä¼˜å…ˆçº§ (P1)       ç¬¬ä¸‰ä¼˜å…ˆçº§ (P2)         â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| ç‰ˆæœ¬ | æ”¯æŒèŒƒå›´ | å¯¹åº”ä¼˜å…ˆçº§ |
|------|----------|-----------|
| v0.1 | C è¯­è¨€åŸºç¡€å¼‚æ­¥æ¨¡å¼ | P0.1 |
| v0.2 | å¸¸ç”¨é©±åŠ¨æ¡†æ¶ (USB, char_dev) | P0.2 |
| v0.3 | å†…æ ¸æ ¸å¿ƒæœºåˆ¶ (RCU, kthread) | P0.3 |
| v0.5 | ç½‘ç»œ/æ–‡ä»¶ç³»ç»Ÿå­ç³»ç»Ÿ | P0.4-P0.5 |
| **v1.0** | **Linux å†…æ ¸å®Œæ•´æ”¯æŒ** âœ“ | P0 å®Œæˆ |
| v1.1 | Android App å±‚ + JNI | P1.1-P1.3 |
| v1.5 | Android Framework + HAL | P1.4-P1.5 |
| **v2.0** | **Android ç³»ç»Ÿå®Œæ•´æ”¯æŒ** âœ“ | P1 å®Œæˆ |
| v2.1 | C++ / Rust å¼‚æ­¥æ¨¡å¼ | P2.1-P2.2 |
| v2.5 | Go / Java é€šç”¨æ¨¡å¼ | P2.3-P2.4 |
| **v3.0** | **å¤šè¯­è¨€å¤šå¹³å°æ”¯æŒ** âœ“ | P2 å®Œæˆ |

