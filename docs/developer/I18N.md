# 国际化 (i18n) 开发指南

本文档介绍 FlowSight 的国际化实现方案和翻译贡献流程。

## 🌐 语言支持优先级

| 优先级 | 语言 | 状态 |
|--------|------|------|
| P0 | 简体中文 (zh-CN) | ✅ v1.0 首发 |
| P0 | 英文 (en-US) | ✅ v1.0 首发 |
| P1 | 繁体中文 (zh-TW) | 📋 v2.0+ |
| P1 | 日文 (ja-JP) | 📋 v2.0+ |
| P1 | 韩文 (ko-KR) | 📋 v2.0+ |
| P2 | 其他语言 | 📋 社区贡献 |

## 📁 目录结构

```
app/src/i18n/
├── index.ts              # i18n 初始化配置
├── useLocale.ts          # 语言切换 Hook
└── locales/
    ├── zh-CN.json        # 简体中文 (主语言)
    ├── en-US.json        # 英文
    └── _template.json    # 翻译模板
```

## 🛠️ 技术方案

- **框架**: react-i18next
- **格式**: JSON
- **语言检测**: 系统语言 → 用户设置 → 默认 zh-CN

## 📝 翻译文件结构

```json
{
  "app": {
    "name": "FlowSight",
    "menu": { "file": "文件", "edit": "编辑", ... }
  },
  "panels": { "explorer": "文件浏览器", ... },
  "analysis": { "analyzing": "正在分析...", ... },
  "settings": { "language": "语言", "theme": "主题", ... }
}
```

## 💻 代码使用

```tsx
import { useTranslation } from 'react-i18next';

function MyComponent() {
  const { t } = useTranslation();
  return <button>{t('app.menu.file')}</button>;
}
```

## 🤝 贡献翻译

### 步骤

1. Fork 仓库
2. 复制 `_template.json` 为 `{locale}.json`
3. 翻译所有 key
4. 提交 PR

### 规范

- 保持技术术语一致性
- 注意 UI 空间限制（避免过长翻译）
- 使用正式语气
- 遵循目标语言的本地化习惯

### 常见术语对照表

| 英文 | 简体中文 | 说明 |
|------|----------|------|
| Execution Flow | 执行流 | 核心功能名 |
| Call Graph | 调用关系图 | |
| Async Pattern | 异步模式 | |
| Knowledge Base | 知识库 | |
| Pointer Analysis | 指针分析 | |
| Workqueue | 工作队列 | Linux 术语 |
| IRQ Handler | 中断处理程序 | |
| Callback | 回调函数 | |

## 🔧 开发调试

```bash
# 开发模式下切换语言
# 设置 → 语言 → 选择语言

# 强制使用特定语言（调试用）
localStorage.setItem('i18n-locale', 'en-US')
```

## ✅ 检查清单

添加新的 UI 文本时：

- [ ] 在 `zh-CN.json` 中添加中文
- [ ] 在 `en-US.json` 中添加英文
- [ ] 更新 `_template.json` 模板
- [ ] 使用 `t()` 函数而非硬编码文本

